<html xmlns:th="http://www.thymeleaf.org">
<div th:replace="inc/_header"></div>

<!-- c3-chart CSS -->
<link rel="stylesheet" type="text/css" th:href="@{/app-assets/css/plugins/charts/c3-chart.css}">
<!--// c3-chart CSS -->
<!-- 컨텐츠 영역 -->

<script type="text/javascript" th:inline="javascript">
/*<![CDATA[*/
	var token = $("meta[name='_csrf']").attr("content");
	var header = $("meta[name='_csrf_header']").attr("content");
	
$(document).ready(function(){
	$(".lnb_4").addClass("open"); 
	$(".lnb_4_5").addClass("active");});
	
	//시스템 정보 ajax	
	function systemStatus() {
		$.ajax({
			beforeSend : function(xhr) {
				xhr.setRequestHeader(header, token);
			},
			url : /*[[ @{/system/systemStatus.do} ]]*/ '/system/systemStatus.do',
			type : "POST",
			dataType : "JSON",
			success : function(data) {
				
				//드라이브 정보
				var freeDiskMem = (data.freeDiskMem/1024/1024/1024).toFixed(2);
				var usedDiskMem = ((data.totalDiskMem - data.freeDiskMem)/1024/1024/1024).toFixed(2);
				var totalDiskMem = (data.totalDiskMem/1024/1024/1024).toFixed(2);
				var driveUsagePercent = ((data.totalDiskMem - data.freeDiskMem)/data.totalDiskMem*100).toFixed(1);
			
				$("#driveUsage").text(usedDiskMem + 'GB / ' + totalDiskMem + 'GB');
				$("#driveUsagePercent").html(driveUsagePercent + '<small class="font-medium-1">%</small>');
				$("#driveUsageBar").css("width", driveUsagePercent + '%');
				$("#driveUsageBar").data("aria-valuenow", driveUsagePercent);
				
				//시스템 현황 CPU
				var cpuUsagePercent = (data.cpuStatus*100).toFixed(1);
				
				$("#cpuUsagePercent").html(cpuUsagePercent + '<small class="font-medium-1">%</small>');
				$("#cpuUsageBar").css("width", cpuUsagePercent + '%');
				$("#cpuUsageBar").css("aria-valuenow", cpuUsagePercent);
				
				//시스템 현황 Memory
				$("#memoryUsage").text(data.useMemory + ' / ' + data.totalMemory);
				$("#memoryUsagePercent").html(data.useMemoryPersent + '<small class="font-medium-1">%</small>');
				$("#memoryUsageBar").css("width", data.useMemoryPersent + '%');
				$("#memoryUsageBar").data("aria-valuenow", data.useMemoryPersent);
			},
			error : function(e) {
				alert("데이터를 받아오는 도중 에러가 발생하였습니다. 관리자에게 문의해주세요.");
			}
		});
	}
	
	$(document).ready(function() {
		systemStatus();
		
		//1초마다 업데이트
		setInterval(systemStatus, 1000);
	});
/*]]*/
</script> 
<div class="app-content content">
<div class="content-wrapper">
<!-- 컨텐츠:헤더-페이지명,네비게이터 -->
<div class="content-header row">
	<div class="content-header-left col-md-8 col-12 mb-2 breadcrumb-new">
		<h3 class="content-header-title mb-0 d-inline-block">모니터링</h3>
		<div class="row breadcrumbs-top d-inline-block">
			<div class="breadcrumb-wrapper col-12">
				<ol class="breadcrumb">
					<li class="breadcrumb-item">Home</li>
					<li class="breadcrumb-item">시스템관리</li>
					<li class="breadcrumb-item active">모니터링</li>
				</ol>
			</div>
		</div>
	</div>
</div>
<!--// 컨텐츠:헤더-페이지명,네비게이터 -->
<!-- 컨텐츠:본문 영역 -->
<div class="content-body">
	<!-- 디스크립션 -->
	<div class="bs-callout-success mb-2">
		<div class="media align-items-stretch">
			<div class="media-left d-flex align-items-center bg-gray p-2">
				<i class="ft-check-square white font-medium-5"></i>
			</div>
			<div class="media-body p-1">
				<ul class="list-left list-disc mb-0">
					<li>드라이브 정보, CPU, MEMORY 정보를 볼 수 있는 페이지 입니다.</li>
					<li>솔루션이 설치된 위치와 업로드 되는 컨텐츠들의 위치 정보 및 용량을 볼 수 있는 페이지입니다.</li>
				</ul>
			</div>
		</div>
	</div>
	<!--// 디스크립션 -->
	<!-- 시스템 정보 -->
	<div class="row">
	  <div class="col-12">
		<div class="card">
		  <div class="card-content">
			<div class="card-body">
			   <h4 class="card-title">시스템 정보</h4>
			  <div class="row">

				<!-- 드라이브정보 -->
				<div class="col-sm-4 border-right-blue-grey border-right-lighten-5">
				  <div class="pb-1">
					<div class="clearfix mb-1">
					  <i class="icon-disc font-large-1 blue-grey float-left mt-1"></i>
					  <span class="font-large-2 text-bold-600 info float-right" id="driveUsagePercent">20.7<small class="font-medium-1">%</small></span>
					</div>
					<div class="clearfix">
					  <span class="text-muted">드라이브정보</span>
					  <span class="info float-right" id="driveUsage"> 354.7GB / 447.6GB</span>
					</div>
				  </div>
				  <div class="progress mb-0" style="height: 7px;">
					<div id="driveUsageBar" class="progress-bar bg-info" role="progressbar" style="width: 20%" aria-valuenow="90"
					aria-valuemin="0" aria-valuemax="100"></div>
				  </div>
				</div>
				<!--// 드라이브정보 -->

				<!-- 시스템 현황 CPU -->
				<div class="col-sm-4 border-right-blue-grey border-right-lighten-5">
				  <div class="pb-1">
					<div class="clearfix mb-1">
					  <i class="icon-graph font-large-1 blue-grey float-left mt-1"></i>
					  <span class="font-large-2 text-bold-600 danger float-right" id="cpuUsagePercent">27<small class="font-medium-1">%</small></span>
					</div>
					<div class="clearfix">
					  <span class="text-muted">시스템 현황 CPU</span>
					  <!--span class="danger float-right"> 75/1000</span-->
					</div>
				  </div>
				  <div class="progress mb-0" style="height: 7px;">
					<div id="cpuUsageBar" class="progress-bar bg-danger" role="progressbar" style="width: 27%" aria-valuenow="27"
					aria-valuemin="0" aria-valuemax="100"></div>
				  </div>
				</div>
				<!--// 시스템 현황 CPU -->

				<!-- 시스템 현황 Memory -->
				<div class="col-sm-4">
				  <div class="pb-1">
					<div class="clearfix mb-1">
					  <i class="icon-screen-desktop font-large-1 blue-grey float-left mt-1"></i>
					  <span class="font-large-2 text-bold-600 success float-right" id="memoryUsagePercent">97.5<small class="font-medium-1">%</small></span>
					</div>
					<div class="clearfix">
					  <span class="text-muted">시스템 현황 Memory</span>
					  <span class="success float-right" id="memoryUsage"> 7.1GB / 7.6GB</span>
					</div>
				  </div>
				  <div class="progress mb-0" style="height: 7px;">
					<div id="memoryUsageBar" class="progress-bar bg-success" role="progressbar" style="width: 97.5%" aria-valuenow="97.5"
					aria-valuemin="0" aria-valuemax="100"></div>
				  </div>
				</div>
				<!--// 시스템 현황 Memory -->
			  </div>
			</div>
		  </div>
		</div>
	  </div>
	</div>
	<!--// 시스템 정보 -->

	<!-- 네트워크 모니터링 -->
	<!-- <div class="row">
		<div class="col-xl-12">
			<div class="card">
				<div class="card-header">
					<h4 class="card-title">네트워크 모니터링</h4>
					<div class="heading-elements">
						
					</div>
				</div>
				<div class="card-content">
					<div class="card-body">
						<small class="float-right">Realtek PCie GBE Family Controller</small>
						<div class="chart-area mb-2">
							<div id="network-chart"></div>
						</div>
						<div class="view-form view-poll">
							<table cellpadding="0" cellspacing="0" class="w-100 text-center" summary="" >
								<colgroup>
									<col width="33.333%"/><col width="33.333%"/><col width="33.333%"/>
								</colgroup>
								<thead>
									<tr>
										<th>IPv4주소</th>
										<th>어댑터 정보</th>
										<th>Host 정보</th>
									</tr>
								</thead>
								<tbody>
									<tr>
										<td>192.168.0.26</td>
										<td>eth0</td>
										<td>bab-pc</td>
									</tr>
								<tbody>
							</table>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div> -->
	<!--// 네트워크 모니터링 -->		 

	<!-- 폴더정보 -->
	<div class="row">
		<div class="col-xl-12">
			<div class="card ">
				<div class="card-header">
					<h4 class="card-title">폴더 정보</h4>
					<div class="heading-elements"></div>
				</div>
				<div class="card-content">
					<div class="card-body">
						<div class="view-form view-poll">
							<table cellpadding="0" cellspacing="0" class="w-100 text-center" summary="" >
								<colgroup>
									<col width="15%"/><col width="70%"/><col width="15%"/>
								</colgroup>
								<thead>
									<tr>
										<th>구분</th>
										<th>경로</th>
										<th>용량</th>
									</tr>
								</thead>
								<tbody>
									<tr>
										<th scope="col">소스폴더</th>
										<td class="text-left eng-text" th:text="${vo.rootPath}"></td>
										<td th:text="${vo.rootFolderSize} + GB"></td>
									</tr>
									<tr>
										<th scope="col">데이터폴더</th>
										<td class="text-left eng-text" th:text="${vo.etcFileUploadPath}"></td>
										<td th:text="${vo.uploadFolderSize} + GB"></td>
									</tr>
								</tbody>
							</table>
						</div>

	
					</div>
				</div>
			</div>
		</div>
	</div>
	<!--// 폴더정보 -->
</div>
<!--// 컨텐츠 본문 영역 -->
</div>
</div>
<!--// 컨텐츠 영역 -->

<!-- 챠트스크립트 -->
<script th:src="@{/app-assets/vendors/js/charts/d3.min.js}" type="text/javascript"></script>
<script th:src="@{/app-assets/vendors/js/charts/c3.min.js}" type="text/javascript"></script>
<div th:replace="inc/_footer"></div>
<script type="text/javascript" th:inline="javascript">
//<![CDATA[
/*=========================================================================================
    File Name: spline.js
    Description: c3 spline chart
    ----------------------------------------------------------------------------------------
    Item Name: Robust - Responsive Admin Template
    Version: 2.0
    Author: PIXINVENT
    Author URL: http://www.themeforest.net/user/pixinvent
==========================================================================================*/

// Spline chart
// ------------------------------
$(window).on("load", function(){
	var d3locale_ko = d3.locale({
		'decimal': '.',
		'thousands': ',',
		'grouping': [3],
		'currency': ['\\', ''],
		'dateTime': '%a %b %e %X %Y',
		'date': '%Y-%m-%d',
		'time': '%H:%M:%S',
		'periods': ['AM', 'PM'],
		'days': ['일요일', '월요일', '화요일', '수요일', '목요일', '금요일', '토요일'],
		'shortDays': ['일', '월', '화', '수', '목', '금', '토'],
		'months': ['1월', '2월', '3월', '4월', '5월', '6월', '7월', '8월', '9월', '10월', '11월', '12월'],
		'shortMonths': ['1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11', '12']
	});

	//네트워크
    var splineChart = c3.generate({
        bindto: '#network-chart',
        size: { height: 400 },
        point: {
            r: 4
        },
        color: {
            pattern: ['#e83e8c', '#967adc', '#FFFFFF']
        },

        // Create the data table.
        data: {
			 x: 'x',
			xFormat: '%Y-%m-%d %H:%M:%S',
            columns: [
				['x', '2020-01-12 09:00:00', '2020-01-12 09:30:00', '2020-01-12 10:00:00', '2020-01-12 10:30:00', '2020-01-12 11:00:00', '2020-01-12 11:30:00', '2020-01-12 12:00:00'],
                ['data1', 0, 16, 42, 61, 80, 43, 27],
				['data2',  0, 51, 10, 8, 0, 2, 4],
				['전체', null, null, null, null, null, null, null],
				
            ],

			names: {
						data1: '다운로드',
						data2: '업로드',
						전체: ''
					},

            type: 'area',
			types: {
                전체: 'bar'
            },

        },
        axis: {
            x: {
                type: 'timeseries',
                tick: {
                    format: '%Y-%m-%d %H:%M:%S'
                }
            },
            y: {
				tick: {
					format: function (d) { return d + 'bps'; }
				}
            }

        },
        grid: {
            y: {
                show: true,
            }
        },

		padding: {
		  bottom: 20
		}
    });




    // Resize chart on sidebar width change
    $(".menu-toggle").on('click', function() {
        splineChart.resize();
    });

});

//]]>
</script>
<!--// 챠트스크립트 -->